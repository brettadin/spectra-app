# Patch Notes — v1.2.2

## Summary
- Duck-type overlay ingest futures on `status`/`detail`/`payload` so rerun sessions accept legacy dataclass results and continue adding payloads on the UI thread. 【F:app/ui/main.py†L761-L777】
- Added regression coverage that simulates a rerun with a legacy ingest result and proves payload addition succeeds. 【F:tests/ui/test_overlay_ingest_queue_async.py†L186-L236】

## Details
1. **Legacy ingest compatibility**
   - Normalise overlay ingest futures by reading `status`, `detail`, and optional `payload` attributes when present so cached dataclass results created before a rerun remain valid. 【F:app/ui/main.py†L761-L769】
   - Preserve tuple fallbacks for older queue results while still surfacing unexpected structures as errors. 【F:app/ui/main.py†L769-L777】
2. **Regression coverage**
   - Add an ingest queue unit test that feeds a completed future containing a legacy-style dataclass, verifies `_add_overlay_payload` runs, and confirms the job resolves to success. 【F:tests/ui/test_overlay_ingest_queue_async.py†L186-L236】

## Verification
- `pytest tests/ui/test_overlay_ingest_queue_async.py` 【6f3c05†L1-L3】

## Continuity
- Bumped `app/version.json` to v1.2.2 with the updated summary. 【F:app/version.json†L2-L5】
- Logged the change in `docs/atlas/brains.md` and the AI activity log per the v1.2 protocol. 【F:docs/atlas/brains.md†L1-L8】【F:docs/ai_log/2025-10-18.md†L1-L15】
