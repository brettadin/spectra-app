# AI Log — 2025-10-05

## Tasking — v1.2.0i
- Move the reference trace selector and clear action out of the sidebar examples group into the Differential workspace.
- Ensure session state and regression coverage adapt to the relocated controls.
- Refresh continuity artefacts (version, brains, patch notes, AI log) per the v1.2+ blueprint.

## Actions & Decisions
- Re-read the v1.2+ handoff blueprint to confirm continuity expectations before touching the layout. 【F:docs/ai_handoff/Spectra App v1.2+ – Handoff Protocol & Task Blueprint.txt†L1-L35】
- Added `_render_reference_controls` for reuse inside the Differential tab, wiring the selectbox and clear overlays button alongside comparison inputs while keeping state defaults intact. 【F:app/ui/main.py†L2098-L2142】
- Removed the reference widgets from `_render_examples_group` so the sidebar only surfaces example and library controls. 【F:app/ui/main.py†L883-L909】
- Extended the differential AppTest to assert the relocated reference selector and action button render as expected. 【F:tests/ui/test_differential_form.py†L44-L73】
- Logged the move across the new brains entry, patch notes, and version metadata for v1.2.0i. 【F:docs/brains/brains_v1.2.0i.md†L1-L18】【F:docs/patch_notes/v1.2.0i.md†L1-L20】【F:app/version.json†L1-L5】
- Reviewed the ASD help reference terminology to confirm user-facing language stays consistent. 【F:docs/mirrored/nist_asd_help/help.meta.json†L1-L6】

## Verification
- `pytest tests/ui/test_differential_form.py`

## Outstanding Follow-ups
- Explore inline guidance for how reference traces influence similarity scoring to aid new users.
- Restore the FAISS-backed docs index service highlighted in prior continuity logs.

## Docs Consulted
- Spectra App v1.2+ – Handoff Protocol & Task Blueprint. 【F:docs/ai_handoff/Spectra App v1.2+ – Handoff Protocol & Task Blueprint.txt†L1-L35】
- NIST Atomic Spectra Database help. 【F:docs/mirrored/nist_asd_help/help.meta.json†L1-L6】

## Tasking — v1.2.1g
- Capture an adoption blueprint translating JDaviz/Specviz capabilities into Spectra App planning artefacts.
- Update continuity artefacts (brains, patch notes, version, AI log) in line with the v1.2+ workflow contract.

## Actions & Decisions
- Reviewed JDaviz Specviz docs and README to inventory ingestion, viewer, plugin, export, and helper patterns before drafting guidance. 【F:docs/atlas/Specviz_Adoption_Blueprint.md†L3-L82】
- Authored the Specviz Adoption Blueprint covering feature summaries, gap analysis, phased strategy, and research follow-ups, then logged the decision in atlas/brains. 【F:docs/atlas/Specviz_Adoption_Blueprint.md†L1-L82】【F:docs/atlas/brains.md†L1-L7】
- Bumped release metadata and recorded patch notes so downstream tooling recognises the documentation milestone. 【F:app/version.json†L1-L5】【F:docs/patch_notes/v1.2.1g.md†L1-L16】

## Verification
- Not run (documentation-only change).

## Outstanding Follow-ups
- Prototype a helper API skeleton mirroring Specviz method names to validate feasibility before deeper UI work.
- Evaluate embedding strategies for Glue viewers inside Streamlit, including performance profiling of redshift slider patterns.

## Docs Consulted
- JDaviz Specviz user guide (external): https://jdaviz.readthedocs.io/en/latest/specviz/index.html
- JDaviz README (external): https://github.com/spacetelescope/jdaviz/blob/main/README.rst

