# AI Log — 2025-10-15

## Tasking — v1.2.0y
- Ensure FITS wavelength unit hints normalise to canonical aliases before validation and extend regression coverage for plural byte headers.
- Update release collateral (version manifest, brains, patch notes, AI log) per the v1.2+ protocol.

## Actions & Decisions
- Routed `_normalise_wavelength_unit` candidates through a canonicaliser before fallback heuristics so plural byte aliases land on FITS strings the validator accepts. 【F:app/server/ingest_fits.py†L751-L810】
- Simplified `_unit_is_wavelength` to treat canonical strings as authoritative while defensively decoding byte inputs, preventing redundant coercion from rejecting already-normalised units. 【F:app/server/ingest_fits.py†L338-L353】
- Added regression tests for plural byte `TUNIT` and `CUNIT` headers to confirm ingestion reports canonical units and preserves the header metadata for provenance. 【F:tests/server/test_ingest_fits.py†L375-L420】
- Bumped the release metadata and documented the change across patch notes and the brains atlas to keep continuity artefacts in sync. 【F:app/version.json†L1-L5】【F:docs/patch_notes/v1.2.0y.md†L1-L18】【F:docs/atlas/brains.md†L1-L8】

## Verification
- `pytest tests/server/test_ingest_fits.py` 【829103†L1-L33】

## Docs Consulted
- Reviewed the MAST Data Format Guidelines for wavelength unit conventions. https://archive.stsci.edu/data_format.html 【F:docs/mirrored/stsci_archive/data_format.html.meta.json†L1-L6】
