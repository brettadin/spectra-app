# AI Log — 2025-10-20

## Tasking — Differential image guard hotfix
- Prevent the differential similarity workflow from vectorising image overlays and add regression coverage, then roll continuity artefacts.

## Actions & Decisions
- Filtered differential similarity sources so only non-image overlays feed the vectorisation pipeline, preventing `to_vectors` from raising when images are visible. 【F:app/ui/main.py†L3174-L3184】
- Bypassed reference vector construction for image overlays to keep similarity guards consistent across the workspace. 【F:app/ui/main.py†L1893-L1899】
- Added an AppTest that mixes spectral and image overlays and confirmed the differential tab renders without exceptions, covering the previous regression. 【F:tests/ui/test_differential_form.py†L137-L151】
- Published the v1.2.1b patch notes and version metadata to capture the guardrails and test coverage. 【F:docs/patch_notes/v1.2.1b.md†L1-L17】【F:app/version.json†L2-L5】

## Verification
- `pytest tests/ui/test_differential_form.py -q` 【6cbe60†L1-L2】

## Docs Consulted
- None — local search endpoint returned no results for the requested query.
