# AI Log — 2025-10-08

## Tasking — v1.2.0l
- Isolate overlay viewport state per axis kind, warn when mixed time/wavelength traces render together, and keep exports/tests in sync.
- Roll continuity collateral (brains, patch notes, version, AI log) for the new hotfix.

## Actions & Decisions
- Introduced axis-kind helpers and migrated session state to a `viewport_axes` map so wavelength and time traces keep independent zoom ranges. 【F:app/ui/main.py†L336-L407】【F:app/ui/main.py†L421-L472】
- Updated the sidebar and overlay tab to select viewports per axis, emit mixed-axis warnings, and pass axis-aware ranges into plot construction. 【F:app/ui/main.py†L1034-L1114】【F:app/ui/main.py†L2411-L2467】
- Reworked `_build_overlay_figure` and export helpers to honor axis-specific viewports, surface "Mixed axes" titles, and include axis metadata in exported rows. 【F:app/ui/main.py†L1608-L1756】【F:app/ui/main.py†L2086-L2154】
- Extended UI regression coverage for time-series mixes and added a mixed-axis overlay test. 【F:tests/ui/test_auto_viewport.py†L34-L71】【F:tests/ui/test_overlay_mixed_axes.py†L1-L40】
- Logged the design rationale in the atlas brain dump and refreshed versioned continuity docs (brains log/index + patch notes). 【F:docs/atlas/brains.md†L1-L4】【F:docs/brains/brains_v1.2.0l.md†L1-L23】【F:docs/brains/brains_INDEX.md†L1-L18】【F:docs/patch_notes/v1.2.0l.md†L1-L23】

## Verification
- `pytest tests/ui/test_auto_viewport.py tests/ui/test_overlay_full_resolution.py tests/ui/test_overlay_hover.py tests/ui/test_overlay_mixed_axes.py` 【c01f00†L1-L8】

## Outstanding Follow-ups
- Consider adding an explicit axis selector in the sidebar if future payloads introduce additional axis kinds beyond wavelength/time.
- Monitor downstream consumers for the new `axis_kind`/`unit` export fields and update docs if schema consumers request clarifications.

## Docs Consulted
- Astropy time-series overview for axis handling expectations. 【F:docs/mirrored/astropy/timeseries.meta.json†L1-L7】
