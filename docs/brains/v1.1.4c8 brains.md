# MAKE NEW BRAINS EACH TIME YOU MAKE A CHANGE. DO NOT OVER WRITE PREVIOUS BRAINS
# v1.1.4c8 brains â€” EntryHunter, import hygiene, and UI stability

Date (UTC): 2025-09-20T01:53:18Z

## Why EntryHunter exists
When our `app/app_merged.py` surface changes, Streamlit doesn't always expose a single, stable entry (sometimes it's `main()`, sometimes `render()`, sometimes class-based). EntryHunter does three things:

1. **Env override**: honors `SPECTRA_APP_ENTRY` so we can force the entry we want.
2. **Curated guesses**: tries `main`, `render`, `run`, `app`, `ui`, `entry` in that order.
3. **Heuristic scan**: inspects no-arg callables that use Streamlit and tries them.

It logs to `logs/ui_debug.log` so we can see what it tried and what succeeded.

## Import hygiene we learned
- Only import `app.app_merged` **once** and do not call `runpy.run_module` on it afterward. That triggers the 'found in sys.modules' warning and can produce duplicate side-effects.
- Prefer `importlib.import_module` + direct function calls.
- Avoid manipulating `sys.modules` unless absolutely necessary.

## Defensive UI
- Even if no entry is found, we render a stub message instead of a blank page.

## Ops playbook
- To force a specific entry: `setx SPECTRA_APP_ENTRY main` (or PowerShell `$env:SPECTRA_APP_ENTRY='main'` for the current session).
- After unzipping, run `RUN_CMDS/Apply-v1.1.4c8-EntryHunter.ps1`, then `RUN_CMDS/Start-Spectra-Patched.ps1`.
- Check `logs/ui_debug.log` for: `IMPORTED`, `TRY_ENTRY`, `ENTRY_OK`, `CANDIDATE`.
